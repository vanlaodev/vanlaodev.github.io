(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17eb3519"],{"0528":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-card",{staticClass:"shadow-sm",attrs:{title:t.$t("inventoryFormManagement")}},[r("b-form",{staticClass:"mt-3 mb-1",attrs:{inline:""}},[r("b-button",{staticClass:"mb-2 mr-2",attrs:{variant:"success"},on:{click:t.goToCreateInventoryForm}},[r("b-icon",{attrs:{icon:"plus-circle","aria-hidden":"true"}}),t._v(" "+t._s(t.$t("add"))+" ")],1),r("b-button",{staticClass:"mb-2 mr-2",attrs:{variant:"primary"},on:{click:t.loadInventoryMasters}},[r("b-icon",{attrs:{icon:"arrow-repeat","aria-hidden":"true"}}),t._v(" "+t._s(t.$t("refresh"))+" ")],1)],1),r("b-form",{staticClass:"d-flex flex-row flex-nowrap align-items-center mb-3",attrs:{inline:""}},[r("b-input-group",{staticClass:"flex-grow-1",scopedSlots:t._u([{key:"prepend",fn:function(){return[r("b-input-group-text",[r("b-icon",{attrs:{icon:"filter"}})],1)]},proxy:!0}])},[r("b-form-input",{attrs:{type:"search",placeholder:t.$t("filter"),autofocus:""},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)],1),t.loadingTable?r("b-skeleton-table",{attrs:{rows:4,columns:6,"table-props":{bordered:!1}}}):r("b-table",{attrs:{responsive:"",hover:"",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc},on:{filtered:t.onFiltered,"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[r("b-button",{staticClass:"p-0 mr-3",attrs:{variant:"link",size:"sm"},on:{click:function(r){return t.editMaster(e.item.id)}}},[r("b-icon",{attrs:{icon:"pencil-fill","aria-hidden":"true"}}),t._v(" "+t._s(t.$t("edit"))+" ")],1),r("b-button",{staticClass:"p-0 mr-3",attrs:{variant:"link",size:"sm"},on:{click:function(r){return t.showConfirmDeleteMasterModal(e.item.id)}}},[r("b-icon",{attrs:{icon:"trash-fill","aria-hidden":"true"}}),t._v(" "+t._s(t.$t("delete"))+" ")],1)]}}],null,!1,934892756)}),r("b-pagination",{staticClass:"mb-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,size:"md"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),r("confirm-dialog",{attrs:{ctx:t.confirmDialogCtx}}),r("message-dialog",{attrs:{ctx:t.msgDialogCtx}})],1)},a=[],i=r("c964"),s=r("f3f3"),o=(r("96cf"),r("d3b7"),r("7db0"),r("2f62")),l=r("d5bc"),c=r("96ec"),u={name:"InventoryFormManagement",components:{MessageDialog:l["a"],ConfirmDialog:c["a"]},data:function(){return{items:[],currentPage:1,perPage:10,filter:null,loadingTable:!1,msgDialogCtx:{visible:!1,title:"",message:"",resolve:null},confirmDialogCtx:{visible:!1,title:"",message:"",resolve:null},sortBy:"id",sortDesc:!0}},computed:Object(s["a"])(Object(s["a"])({},Object(o["d"])(["loggedInUser"])),{},{fields:function(){var t=this;return[{key:"id",label:this.$t("id"),sortable:!0},{key:"title",label:this.$t("title"),sortable:!0},{key:"fromTime",label:this.$t("from"),sortable:!0,formatter:function(t){return t.format("YYYY-MM-DD")}},{key:"endTime",label:this.$t("to"),sortable:!0,formatter:function(t){return t.format("YYYY-MM-DD")}},{key:"status",label:this.$t("status"),formatter:function(e){var r;switch(e){case"ACTIVE":r=t.$t("active");break;case"INVALID":r=t.$t("invalid");break;default:r=e;break}return r},sortable:!0},{key:"actions",label:this.$t("actions")}]},totalRows:function(){return this.items.length}}),mounted:function(){this.loadInventoryMasters()},methods:{showMsgDialog:function(t,e){var r=this;return new Promise((function(n){r.msgDialogCtx.title=e,r.msgDialogCtx.message=t,r.msgDialogCtx.resolve=n,r.msgDialogCtx.visible=!0}))},showConfirmDialog:function(t,e){var r=this;return new Promise((function(n){r.confirmDialogCtx.title=e,r.confirmDialogCtx.message=t,r.confirmDialogCtx.resolve=n,r.confirmDialogCtx.visible=!0}))},loadInventoryMasters:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.loadingTable){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t.loadingTable=!0,e.next=6,t.$api.inventoryApi.searchMaster({deptId:t.loggedInUser.deptId});case 6:r=e.sent,t.items=r,t.currentPage=1,e.next=15;break;case 11:return e.prev=11,e.t0=e["catch"](2),e.next=15,t.showMsgDialog(e.t0,t.$t("error"));case 15:return e.prev=15,t.loadingTable=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,11,15,18]])})))()},showConfirmDeleteMasterModal:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.items.find((function(e){return e.id==t})),r.next=3,e.showConfirmDialog(e.$t("fmt_msg_confirmDeleteInventoryMaster",{id:t,title:n.title}));case 3:if(a=r.sent,!a){r.next=7;break}return r.next=7,e.deleteMaster(t);case 7:case"end":return r.stop()}}),r)})))()},deleteMaster:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.$api.inventoryApi.deleteMaster(t);case 3:n=0;case 4:if(!(n<e.items.length)){r.next=11;break}if(e.items[n].id!=t){r.next=8;break}return e.$delete(e.items,n),r.abrupt("break",11);case 8:n++,r.next=4;break;case 11:e.$root.$bvToast.toast(e.$t("msg_operationSuccess"),{title:e.$t("message"),variant:"success",autoHideDelay:2e3,solid:!0}),r.next=18;break;case 14:return r.prev=14,r.t0=r["catch"](0),r.next=18,e.showMsgDialog(r.t0,e.$t("error"));case 18:case"end":return r.stop()}}),r,null,[[0,14]])})))()},editMaster:function(t){this.$router.push({name:"EditInventoryForm",params:{id:t}})},goToCreateInventoryForm:function(){this.$router.push({name:"CreateInventoryForm"})},onFiltered:function(){this.currentPage=1}}},m=u,f=r("2877"),d=Object(f["a"])(m,n,a,!1,null,null,null);e["default"]=d.exports},"96ec":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return null!=t.ctx?r("b-modal",{attrs:{title:t.modalTitle,"ok-title":t.$t("confirm"),"cancel-title":t.$t("cancel")},on:{ok:t.onConfirm,change:t.onChange},model:{value:t.ctx.visible,callback:function(e){t.$set(t.ctx,"visible",e)},expression:"ctx.visible"}},[r("p",{staticClass:"my-1"},[t._v(t._s(t.ctx.message))])]):t._e()},a=[],i={name:"ConfirmDialog",props:["ctx"],computed:{modalTitle:function(){return null!=this.ctx&&null!=this.ctx.title&&this.ctx.title.length>0?this.ctx.title:this.$t("confirmation")}},methods:{onChange:function(t){null!=this.ctx&&this.ctx.resolve&&!t&&this.ctx.resolve(!1)},onConfirm:function(){null!=this.ctx&&this.ctx.resolve(!0)}}},s=i,o=r("2877"),l=Object(o["a"])(s,n,a,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-17eb3519.8b830151.js.map